---
layout: post
title: "RocketMQ原理-Producer顺序消息"
date:   2022-08-01
tags: [RocketMQ]
comments: true
author: xy
# toc: true  # 这里加目录导致看到地方太小了
---

顺序消息是指对于一个指定的 Topic ，消息严格按照先进先出（FIFO）的原则进行消息发布和消费，即先发布的消息先消费，后发布的消息后消费。本文主要说明顺序消息的生产有序。 主要内容如下:

1. `RocketMQ` 顺序消息的使用场景

2. `RocketMQ` 如何实现顺序消息的生产

3. 生产者顺序消息需要注意的事项

### 1. `RocketMQ` 顺序消息的使用场景

顺序消息分为`分区顺序消息`和`全局顺序消息`(和分区消息类似不过只有一个队列)。

使用场景: 一个订单产生了三条消息分别是订单创建、订单付款、订单完成。消费时要按照这个顺序消费才能有意义(否则订单状态流转可能出问题)，同时不同订单之间是可以并行消费的。

### 2. `RocketMQ` 如何实现顺序消息的生产

分区(queue)顺序消息实现原理: 同类型的消息推送到同一个队列。例如下图:

   ![img](../images/rocketmq.assests/produce_1.png)



### 3. 生产者顺序消息需要注意的事项

